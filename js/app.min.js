angular.module("app",[]),angular.module("app").factory("cardsFactory",function(){var i={},t=[{id:1,description:"Пофиксить баг в плеере",listId:1},{id:2,description:"Добавить пункты в меню",listId:2},{id:3,description:"Выучить AngularJS",listId:3},{id:4,description:"Выучить AngularJS 2",listId:1}];return i.getCards=function(i){return t.filter(function(t){if(t.listId===i)return!0})},i.addCard=function(i,n){t.push({id:t[t.length-1].id+1,description:n,listId:i})},i.removeCard=function(i){for(var n=0;n<t.length;n++)if(t[n].id===i){t.splice(n,1);break}},i.updateCard=function(i){for(var n=0;n<t.length;n++)if(t[n].id===i.id){t[n].description=i.description,t[n].listId=i.listId;break}},i}),angular.module("app").factory("listsFactory",function(){var i={},t=[{id:1,listName:"ToDo"},{id:2,listName:"Doing"},{id:3,listName:"Done"}];return i.getLists=function(){return t},i.addList=function(i){t.push({id:t[t.length-1].id+1,listName:i})},i.removeList=function(i){for(var n=0;n<t.length;n++)if(t[n].id===i){t.splice(n,1);break}},i}),angular.module("app").directive("closeEditing",function(){return{scope:{isEditing:"="},link:function(i,t,n){t.on("keyup",function(t){27==t.keyCode&&(i.isEditing=!1,i.$apply())})}}}),angular.module("app").controller("cardCtrl",["cardsFactory",function(i){this.isEditing=!1,this.editingCard=null,this.removeCard=function(t){i.removeCard(t)},this.editCard=function(i){this.isEditing=!0,this.editingCard=angular.copy(i)},this.updateCard=function(t){i.updateCard(this.editingCard),this.isEditing=!1,this.editingCard=null}}]),angular.module("app").controller("listCtrl",["listsFactory","cardsFactory",function(i,t){this.removeList=function(t){i.removeList(t)},this.getCards=function(i){return t.getCards(i)},this.addCard=function(i){t.addCard(i,this.description),this.description=""}}]),angular.module("app").controller("listsCtrl",["listsFactory",function(i){this.lists=i.getLists(),this.addList=function(){i.addList(this.listName),this.listName=""}}]);